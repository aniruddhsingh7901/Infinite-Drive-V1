{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/im/infinite-drive/frontend/src/context/authContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\nimport axios, { AxiosError } from 'axios';\nimport toast from 'react-hot-toast';\n\ninterface AuthContextType {\n  user: any;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    console.log(\"ðŸš€ ~ useEffect ~ token:\", token)\n    if (token) {\n      axios.get('http://localhost:5000/auth/check-auth', {\n        headers: { Authorization: `Bearer ${token}` }\n      })\n      .then(response => {\n        setUser(response.data.user);\n        setLoading(false);\n      })\n      .catch(() => {\n        localStorage.removeItem('token');\n        setLoading(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    setLoading(true);\n    try {\n      const response = await axios.post('http://localhost:5000/auth/login', { email, password });\n      localStorage.setItem('token', response.data.token);\n      setUser(response.data.user);\n      toast.success('Login successful!');\n      router.push('/admin');\n    } catch (error) {\n      const err = error as AxiosError<{ message: string }>;\n      if (err.response?.status === 401) {\n        toast.error('Invalid email or password', {\n          style: {\n            background: '#FEE2E2',\n            color: '#DC2626',\n            padding: '16px',\n            borderRadius: '8px',\n          },\n        });\n      } else {\n        toast.error('An error occurred. Please try again later.');\n      }\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    router.push('/admin/login');\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AADA;;;AAJA;;;;;AAcA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAO;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,QAAQ,GAAG,CAAC,2BAA2B;YACvC,IAAI,OAAO;gBACT,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,yCAAyC;oBACjD,SAAS;wBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;oBAAC;gBAC9C,GACC,IAAI;8CAAC,CAAA;wBACJ,QAAQ,SAAS,IAAI,CAAC,IAAI;wBAC1B,WAAW;oBACb;6CACC,KAAK;8CAAC;wBACL,aAAa,UAAU,CAAC;wBACxB,WAAW;oBACb;;YACF,OAAO;gBACL,WAAW;YACb;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,WAAW;QACX,IAAI;YACF,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,oCAAoC;gBAAE;gBAAO;YAAS;YACxF,aAAa,OAAO,CAAC,SAAS,SAAS,IAAI,CAAC,KAAK;YACjD,QAAQ,SAAS,IAAI,CAAC,IAAI;YAC1B,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;YACd,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,MAAM,MAAM;YACZ,IAAI,IAAI,QAAQ,EAAE,WAAW,KAAK;gBAChC,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,6BAA6B;oBACvC,OAAO;wBACL,YAAY;wBACZ,OAAO;wBACP,SAAS;wBACT,cAAc;oBAChB;gBACF;YACF,OAAO;gBACL,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACd;YACA,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IACA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAO;QAAO;kBACzD;;;;;;AAGP;GA/Da;;QAGI,qIAAA,CAAA,YAAS;;;KAHb;AAiEN,MAAM,UAAU;;IACrB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///home/im/infinite-drive/frontend/src/lib/cart/CartContext.tsx"],"sourcesContent":["// 'use client';\n\n// import { createContext, useContext, useState, ReactNode } from 'react';\n\n// export interface CartItem {\n//   id: string;\n//   title: string;\n//   price: number;\n//   format: 'PDF' | 'EPUB';\n// }\n\n// export interface CartContextProps {\n//   items: CartItem[];\n//   addItem: (item: CartItem) => void;\n//   removeItem: (id: string) => void;\n//   clearCart: () => void;\n//   total: number;\n// }\n\n// const CartContext = createContext<CartContextProps | undefined>(undefined);\n\n// export function CartProvider({ children }: { children: ReactNode }) {\n//   const [items, setItems] = useState<CartItem[]>([]);\n\n//   const addItem = (item: CartItem) => {\n//     setItems(current => [...current, item]);\n//   };\n\n//   const removeItem = (id: string) => {\n//     setItems(current => current.filter(item => item.id !== id));\n//   };\n\n//   const clearCart = () => setItems([]);\n\n//   const total = items.reduce((sum, item) => sum + item.price, 0);\n\n//   return (\n//     <CartContext.Provider value={{ items, addItem, removeItem, clearCart, total }}>\n//       {children}\n//     </CartContext.Provider>\n//   );\n// }\n\n// export function useCart(): CartContextProps {\n//   const context = useContext(CartContext);\n//   if (context === undefined) {\n//     throw new Error('useCart must be used within a CartProvider');\n//   }\n//   return context;\n// }\n\n'use client';\n\nimport { createContext, useContext, useState } from 'react';\n\nexport interface CartItem {\n  id: string;\n  title: string;\n  price: number;\n  quantity: number;  // Added this\n  format: 'PDF' | 'EPUB';  // Added this\n}\n\ntype CartContextType = {\n  items: CartItem[];\n  addItem: (item: Omit<CartItem, 'quantity'>) => void;\n  removeItem: (id: string) => void;\n  clearCart: () => void;\n  total: number;\n  itemCount: number;\n}\n\nconst CartContext = createContext<CartContextType | null>(null);\n\nexport function CartProvider({ children }: { children: React.ReactNode }) {\n  const [items, setItems] = useState<CartItem[]>([]);\n\n  const addItem = (item: Omit<CartItem, 'quantity'>) => {\n    setItems(current => {\n      const exists = current.find(i => i.id === item.id);\n      if (exists) {\n        return current.map(i => \n          i.id === item.id \n            ? { ...i, quantity: i.quantity + 1 }\n            : i\n        );\n      }\n      return [...current, { ...item, quantity: 1 }];\n    });\n  };\n\n  const removeItem = (id: string) => {\n    setItems(current => current.filter(item => item.id !== id));\n  };\n\n  const clearCart = () => setItems([]);\n\n  const total = items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  const itemCount = items.reduce((count, item) => count + item.quantity, 0);\n\n  return (\n    <CartContext.Provider value={{ \n      items, \n      addItem, \n      removeItem, \n      clearCart, \n      total,\n      itemCount \n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (!context) throw new Error('useCart must be used within CartProvider');\n  return context;\n}"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,0EAA0E;AAE1E,8BAA8B;AAC9B,gBAAgB;AAChB,mBAAmB;AACnB,mBAAmB;AACnB,4BAA4B;AAC5B,IAAI;AAEJ,sCAAsC;AACtC,uBAAuB;AACvB,uCAAuC;AACvC,sCAAsC;AACtC,2BAA2B;AAC3B,mBAAmB;AACnB,IAAI;AAEJ,8EAA8E;AAE9E,wEAAwE;AACxE,wDAAwD;AAExD,0CAA0C;AAC1C,+CAA+C;AAC/C,OAAO;AAEP,yCAAyC;AACzC,mEAAmE;AACnE,OAAO;AAEP,0CAA0C;AAE1C,oEAAoE;AAEpE,aAAa;AACb,sFAAsF;AACtF,mBAAmB;AACnB,8BAA8B;AAC9B,OAAO;AACP,IAAI;AAEJ,gDAAgD;AAChD,6CAA6C;AAC7C,iCAAiC;AACjC,qEAAqE;AACrE,MAAM;AACN,oBAAoB;AACpB,IAAI;;;;;;AAIJ;;;AAFA;;AAqBA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA0B;AAEnD,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAEjD,MAAM,UAAU,CAAC;QACf,SAAS,CAAA;YACP,MAAM,SAAS,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;YACjD,IAAI,QAAQ;gBACV,OAAO,QAAQ,GAAG,CAAC,CAAA,IACjB,EAAE,EAAE,KAAK,KAAK,EAAE,GACZ;wBAAE,GAAG,CAAC;wBAAE,UAAU,EAAE,QAAQ,GAAG;oBAAE,IACjC;YAER;YACA,OAAO;mBAAI;gBAAS;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAE;aAAE;QAC/C;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,SAAS,CAAA,UAAW,QAAQ,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IACzD;IAEA,MAAM,YAAY,IAAM,SAAS,EAAE;IAEnC,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;IAC5E,MAAM,YAAY,MAAM,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAEvE,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAC3B;YACA;YACA;YACA;YACA;YACA;QACF;kBACG;;;;;;AAGP;GAtCgB;KAAA;AAwCT,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT;IAJgB"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}