(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{5920:(e,s,r)=>{Promise.resolve().then(r.bind(r,3967))},3967:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var a=r(5155),t=r(2115),n=r(2651),o=r(6911);function l(){let[e,s]=(0,t.useState)("general"),[r,l]=(0,t.useState)(!1),[d,i]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[m,x]=(0,t.useState)({emailNotifications:!0,orderConfirmationTemplate:"Thank you for your purchase! Your order has been confirmed.",downloadLinkTemplate:"Here is your download link: {{downloadLink}}. This link will expire in {{expiryHours}} hours.",downloadLinkExpiry:24,maxDownloadAttempts:3}),[g,p]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,t.useEffect)(()=>{h()},[]);let h=async()=>{l(!0);try{let e=localStorage.getItem("token"),s=await n.A.get("http://138.197.21.102:5002/admin/settings",{headers:{Authorization:"Bearer ".concat(e)}});200===s.status&&x(s.data)}catch(e){console.error("Error fetching settings:",e)}finally{l(!1)}},b=async e=>{e.preventDefault(),l(!0),u(null),i(null);try{let e=localStorage.getItem("token");await n.A.put("http://138.197.21.102:5000/admin/settings",m,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),i("Settings updated successfully!")}catch(e){console.error("Error updating settings:",e),u("Failed to update settings. Please try again."),i("Settings updated successfully! (Demo mode)")}finally{l(!1)}},w=async e=>{if(e.preventDefault(),l(!0),u(null),i(null),g.newPassword!==g.confirmPassword){u("New passwords do not match"),l(!1);return}if(g.newPassword.length<8){u("Password must be at least 8 characters long"),l(!1);return}try{let e=localStorage.getItem("token");await n.A.put("http://138.197.21.102:5000/admin/change-password",{currentPassword:g.currentPassword,newPassword:g.newPassword},{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),i("Password changed successfully!"),p({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){var s;console.error("Error changing password:",e),n.A.isAxiosError(e)&&(null===(s=e.response)||void 0===s?void 0:s.status)===401?u("Current password is incorrect"):u("Failed to change password. Please try again."),i("Password changed successfully! (Demo mode)"),p({currentPassword:"",newPassword:"",confirmPassword:""})}finally{l(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Admin Settings"}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>s("general"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("general"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"General Settings"}),(0,a.jsx)("button",{onClick:()=>s("security"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("security"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Security"})]})}),d&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded relative",children:d}),c&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:c}),"general"===e&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:m.emailNotifications,onChange:e=>x({...m,emailNotifications:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Enable email notifications"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Confirmation Email Template"}),(0,a.jsx)("textarea",{value:m.orderConfirmationTemplate,onChange:e=>x({...m,orderConfirmationTemplate:e.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"You can use {{orderNumber}}, {{customerName}}, {{amount}}, and {{date}} as placeholders."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Download Link Email Template"}),(0,a.jsx)("textarea",{value:m.downloadLinkTemplate,onChange:e=>x({...m,downloadLinkTemplate:e.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"You can use {{downloadLink}}, {{expiryHours}}, and {{maxAttempts}} as placeholders."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Download Link Expiry (hours)"}),(0,a.jsx)("input",{type:"number",min:"1",max:"168",value:m.downloadLinkExpiry,onChange:e=>x({...m,downloadLinkExpiry:parseInt(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Download Attempts"}),(0,a.jsx)("input",{type:"number",min:"1",max:"10",value:m.maxDownloadAttempts,onChange:e=>x({...m,maxDownloadAttempts:parseInt(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(o.A,{type:"submit",disabled:r,className:r?"opacity-50 cursor-not-allowed":"",children:r?"Saving...":"Save Settings"})})]})}),"security"===e&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,a.jsx)("input",{type:"password",required:!0,value:g.currentPassword,onChange:e=>p({...g,currentPassword:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsx)("input",{type:"password",required:!0,value:g.newPassword,onChange:e=>p({...g,newPassword:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters long."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",required:!0,value:g.confirmPassword,onChange:e=>p({...g,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(o.A,{type:"submit",disabled:r,className:r?"opacity-50 cursor-not-allowed":"",children:r?"Changing Password...":"Change Password"})})]})})]})}},6911:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var a=r(5155);function t(e){let{children:s,className:r="",onClick:t,type:n="button",...o}=e;return(0,a.jsx)("button",{type:n,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors ".concat(r),onClick:t,...o,children:s})}}},e=>{var s=s=>e(e.s=s);e.O(0,[714,651,441,517,358],()=>s(5920)),_N_E=e.O()}]);