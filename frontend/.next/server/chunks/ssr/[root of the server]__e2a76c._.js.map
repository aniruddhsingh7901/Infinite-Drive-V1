{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///home/im/infinite-drive/frontend/src/app/admin/layout.tsx"],"sourcesContent":["\n\n// 'use client';\n\n// import { useState, useEffect } from 'react';\n// import { useRouter } from 'next/navigation';\n// import Link from 'next/link';\n// import axios from 'axios';\n\n// const menuItems = [\n//   { href: '/admin', label: 'Dashboard', icon: 'dashboard' },\n//   { href: '/admin/books', label: 'Books', icon: 'book' },\n//   { href: '/admin/orders', label: 'Orders', icon: 'shopping-cart' },\n//   { href: '/admin/settings', label: 'Settings', icon: 'cog' }\n// ];\n\n// export default function AdminLayout({\n//   children,\n// }: {\n//   children: React.ReactNode;\n// }) {\n//   const router = useRouter();\n//   const [isSidebarOpen, setSidebarOpen] = useState(true);\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('token');\n//     if (!token) {\n//       router.push('/admin/login');\n//     }\n//   }, [router]);\n\n//   const handleLogout = () => {\n//     localStorage.removeItem('token');\n//     router.push('/admin/login');\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gray-100\">\n//       {/* Sidebar */}\n//       <div className={`fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 transform transition-transform duration-200 ease-in-out ${\n//         isSidebarOpen ? 'translate-x-0' : '-translate-x-full'\n//       }`}>\n//         <div className=\"flex flex-col h-full\">\n//           {/* Admin Header */}\n//           <div className=\"flex items-center justify-between px-4 py-6 border-b border-gray-800\">\n//             <h1 className=\"text-xl font-bold text-white\">Admin Panel</h1>\n//             <button onClick={() => setSidebarOpen(false)} className=\"lg:hidden text-gray-400 hover:text-white\">\n//               <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n//                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n//               </svg>\n//             </button>\n//           </div>\n\n//           {/* Navigation */}\n//           <nav className=\"flex-1 px-4 py-6 space-y-2\">\n//             {menuItems.map((item) => (\n//               <Link\n//                 key={item.href}\n//                 href={item.href}\n//                 className=\"flex items-center px-4 py-3 text-gray-300 rounded-lg hover:bg-gray-800 hover:text-white transition-colors\"\n//               >\n//                 <span>{item.label}</span>\n//               </Link>\n//             ))}\n//           </nav>\n//         </div>\n//       </div>\n\n//       {/* Main Content */}\n//       <div className={`lg:pl-64 transition-all duration-200 ${isSidebarOpen ? 'pl-64' : 'pl-0'}`}>\n//         <header className=\"bg-white shadow-sm\">\n//           <div className=\"flex items-center justify-between px-4 py-4\">\n//             <button\n//               onClick={() => setSidebarOpen(!isSidebarOpen)}\n//               className=\"text-gray-500 hover:text-gray-700\"\n//             >\n//               <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n//                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n//               </svg>\n//             </button>\n//             <div className=\"flex items-center space-x-4\">\n//               <button className=\"text-gray-500 hover:text-gray-700\">\n//                 <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n//                   <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n//                 </svg>\n//               </button>\n//               <div className=\"relative\">\n//                 <button className=\"flex items-center space-x-2 text-gray-700 hover:text-gray-900\">\n//                   <div className=\"w-8 h-8 rounded-full bg-gray-200\"></div>\n//                   <span>Admin</span>\n//                 </button>\n//               </div>\n//               <button onClick={handleLogout} className=\"text-gray-500 hover:text-gray-700\">\n//                 Logout\n//               </button>\n//             </div>\n//           </div>\n//         </header>\n\n//         <main className=\"p-6\">{children}</main>\n//       </div>\n//     </div>\n//   );\n// }\n\n'use client';\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport axios from 'axios';\n\nconst menuItems = [\n  { href: '/admin', label: 'Dashboard', icon: 'dashboard' },\n  { href: '/admin/books', label: 'Books', icon: 'book' },\n  { href: '/admin/orders', label: 'Orders', icon: 'shopping-cart' },\n  { href: '/admin/settings', label: 'Settings', icon: 'cog' }\n];\n\nexport default function AdminLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n\n      const currentPath = window.location.pathname;\n\n \n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      router.push('/admin/login');\n      return;\n    }\n    // const token = localStorage.getItem('token');\n    // if (!token) {\n    //   router.push('/admin/login');\n    //  return;\n    // }\n\n    const checkAuth = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/admin/check-auth', {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        if (response.data.isAuthenticated) {\n          setIsAuthenticated(true);\n        } else {\n          setErrorMessage('Access denied. You are not an admin.');\n          router.push('/admin/login');\n        }\n      } catch (error) {\n        setErrorMessage('Access denied. You are not an admin.');\n        router.push('/admin/login');\n      }finally {\n      setIsLoading(false); // Make sure to stop loading state\n    }\n    };\n\n    checkAuth();\n  }, [router]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    router.push('/admin/login');\n  };\n\n\n  if (isLoading) {\n  return <div>Loading...</div>; // Show a loading indicator until the auth check is complete\n} \n  if (!isAuthenticated) {\n    return <div>{errorMessage}</div>;\n  }\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <aside className={`bg-white w-64 shadow-md ${isSidebarOpen ? 'block' : 'hidden'} md:block`}>\n        <div className=\"p-4\">\n          <h2 className=\"text-2xl font-bold\">Admin Panel</h2>\n        </div>\n        <nav className=\"mt-5\">\n          {menuItems.map((item) => (\n            <Link key={item.href} href={item.href}>\n              <a className=\"block px-4 py-2 mt-2 text-sm font-semibold text-gray-900 bg-gray-200 rounded-lg hover:bg-gray-300\">\n                {item.label}\n              </a>\n            </Link>\n          ))}\n        </nav>\n        <div className=\"p-4\">\n          <button\n            onClick={handleLogout}\n            className=\"w-full px-4 py-2 mt-2 text-sm font-semibold text-white bg-red-500 rounded-lg hover:bg-red-600\"\n          >\n            Logout\n          </button>\n        </div>\n      </aside>\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <header className=\"flex items-center justify-between p-4 bg-white shadow-md\">\n          <button\n            onClick={() => setSidebarOpen(!isSidebarOpen)}\n            className=\"text-gray-500 focus:outline-none md:hidden\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M4 6h16M4 12h16m-7 6h7\"\n              ></path>\n            </svg>\n          </button>\n          <h1 className=\"text-xl font-bold\">Admin Panel</h1>\n        </header>\n        <main className=\"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100\">\n          <div className=\"container mx-auto px-6 py-8\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 462, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}