(()=>{var e={};e.id=160,e.ids=[160],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},3293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(260),a=r(8203),i=r(5155),n=r.n(i),l=r(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["reviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9711)),"/infinite-drive-v2/frontend/src/app/admin/reviews/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6038)),"/infinite-drive-v2/frontend/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/infinite-drive-v2/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/infinite-drive-v2/frontend/src/app/admin/reviews/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/reviews/page",pathname:"/admin/reviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9022:(e,t,r)=>{Promise.resolve().then(r.bind(r,9711))},7478:(e,t,r)=>{Promise.resolve().then(r.bind(r,3307))},3307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5512),a=r(8009),i=r(5668);function n(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[x,p]=(0,a.useState)("all"),[h,m]=(0,a.useState)(""),u=async()=>{n(!0),o(null);try{let e=localStorage.getItem("token");if(!e){o("Authentication token not found. Please log in again."),n(!1);return}let r=await i.A.get("https://infinitedriven.com/api/admin/reviews",{headers:{Authorization:`Bearer ${e}`}});200===r.status&&t(r.data)}catch(e){console.error("Error fetching reviews:",e),t(g()),i.A.isAxiosError(e)&&e.response?.status!==404&&o("Failed to load reviews. Using sample data instead.")}finally{n(!1)}},g=()=>[{id:"1",orderId:"order-1",userId:"user-1",name:"John Smith",email:"john.smith@example.com",rating:5,date:"2025-01-15T00:00:00.000Z",title:"Life-changing content",content:"The Infinite Drive e-book has completely transformed my approach to personal development. The strategies are practical and easy to implement in daily life.",verified:!0,approved:!0,bookId:"book-1"},{id:"2",orderId:"order-2",userId:"user-2",name:"Sarah Johnson",email:"sarah.johnson@example.com",rating:5,date:"2025-01-20T00:00:00.000Z",title:"Exactly what I needed",content:"I've read many self-help books before, but this one stands out. The author provides clear, actionable steps rather than vague concepts.",verified:!0,approved:!0,bookId:"book-1"},{id:"3",orderId:"order-3",userId:"user-3",name:"Michael Chen",email:"michael.chen@example.com",rating:4,date:"2025-02-05T00:00:00.000Z",title:"Great value for the price",content:"The Self-Discipline section alone was worth the purchase. I've struggled with consistency for years, and the techniques in this book have helped me establish a solid morning routine.",verified:!0,approved:!0,bookId:"book-1"},{id:"4",orderId:"order-4",userId:"user-4",name:"Emily Rodriguez",email:"emily.rodriguez@example.com",rating:5,date:"2025-02-10T00:00:00.000Z",title:"Exceeded my expectations",content:"I was skeptical at first, but decided to give it a try. The content is well-researched and presented in an engaging way.",verified:!0,approved:!1,bookId:"book-2"},{id:"5",orderId:"order-5",userId:"user-5",name:"David Wilson",email:"david.wilson@example.com",rating:5,date:"2025-02-18T00:00:00.000Z",title:"Transformative experience",content:"This isn't just another self-help book - it's a complete system for personal transformation. The combination of the e-book, audio files, and video content creates a powerful learning experience.",verified:!0,approved:!0,bookId:"book-2"}],v=async(r,s)=>{n(!0);try{let a=localStorage.getItem("token");try{await i.A.put(`https://infinitedriven.com/api/admin/reviews/${r}`,{approved:s},{headers:{Authorization:`Bearer ${a}`}})}catch(e){console.error("API call failed, updating local state only:",e)}t(e.map(e=>e.id===r?{...e,approved:s}:e))}catch(e){console.error("Error updating review:",e),o("Failed to update review status.")}finally{n(!1)}},f=async r=>{if(confirm("Are you sure you want to delete this review? This action cannot be undone.")){n(!0);try{let s=localStorage.getItem("token");try{await i.A.delete(`https://infinitedriven.com/api/admin/reviews/${r}`,{headers:{Authorization:`Bearer ${s}`}})}catch(e){console.error("API call failed, updating local state only:",e)}t(e.filter(e=>e.id!==r))}catch(e){console.error("Error deleting review:",e),o("Failed to delete review.")}finally{n(!1)}}},w=e.filter(e=>{let t="all"===x||e.rating===x,r=e.name.toLowerCase().includes(h.toLowerCase())||e.email.toLowerCase().includes(h.toLowerCase())||e.title.toLowerCase().includes(h.toLowerCase())||e.content.toLowerCase().includes(h.toLowerCase());return t&&r}),y=e=>Array.from({length:5}).map((t,r)=>(0,s.jsx)("svg",{className:`w-5 h-5 ${r<e?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},r));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Reviews Management"}),(0,s.jsx)("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:r,children:r?"Loading...":"Refresh"})]}),l&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:l}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",placeholder:"Search reviews...",className:"w-full px-4 py-2 border rounded-lg",value:h,onChange:e=>m(e.target.value)})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{className:"px-4 py-2 border rounded-lg",value:"all"===x?"all":x.toString(),onChange:e=>p("all"===e.target.value?"all":parseInt(e.target.value)),children:[(0,s.jsx)("option",{value:"all",children:"All Ratings"}),(0,s.jsx)("option",{value:"5",children:"5 Stars"}),(0,s.jsx)("option",{value:"4",children:"4 Stars"}),(0,s.jsx)("option",{value:"3",children:"3 Stars"}),(0,s.jsx)("option",{value:"2",children:"2 Stars"}),(0,s.jsx)("option",{value:"1",children:"1 Star"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Reviews"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.length})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Average Rating"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.length>0?(e.reduce((e,t)=>e+t.rating,0)/e.length).toFixed(1):"N/A"})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approval"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.filter(e=>!e.approved).length})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Review"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})})})}):0===w.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No reviews found"})}):w.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-blue-600 font-medium",children:e.name.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"flex",children:y(e.rating)})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.content})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.approved?"Approved":"Pending"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>c(e),className:"text-blue-600 hover:text-blue-900",children:"View"}),e.approved?(0,s.jsx)("button",{onClick:()=>v(e.id,!1),className:"text-yellow-600 hover:text-yellow-900",children:"Unapprove"}):(0,s.jsx)("button",{onClick:()=>v(e.id,!0),className:"text-green-600 hover:text-green-900",children:"Approve"}),(0,s.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id))})]})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 w-full max-w-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Review Details"}),(0,s.jsx)("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),(0,s.jsx)("p",{className:"mt-1 text-lg",children:d.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:d.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Rating"}),(0,s.jsx)("div",{className:"flex mt-1",children:y(d.rating)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Title"}),(0,s.jsx)("p",{className:"mt-1",children:d.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Content"}),(0,s.jsx)("p",{className:"mt-1 text-gray-700 whitespace-pre-line",children:d.content})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,s.jsx)("p",{className:"mt-1",children:new Date(d.date).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,s.jsx)("p",{className:"mt-1",children:(0,s.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d.approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:d.approved?"Approved":"Pending"})})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-2",children:[d.approved?(0,s.jsx)("button",{onClick:()=>{v(d.id,!1),c(null)},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"Unapprove"}):(0,s.jsx)("button",{onClick:()=>{v(d.id,!0),c(null)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve"}),(0,s.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this review? This action cannot be undone.")&&(f(d.id),c(null))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"}),(0,s.jsx)("button",{onClick:()=>c(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Close"})]})]})})]})}},9711:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/infinite-drive-v2/frontend/src/app/admin/reviews/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/infinite-drive-v2/frontend/src/app/admin/reviews/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,408,77,531,939],()=>r(3293));module.exports=s})();