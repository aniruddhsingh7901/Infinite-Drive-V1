(()=>{var e={};e.id=279,e.ids=[279],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},5085:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(260),i=r(8203),o=r(5155),n=r.n(o),a=r(7292),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5940)),"/infinite-drive-v2/frontend/src/app/checkout/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/infinite-drive-v2/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/infinite-drive-v2/frontend/src/app/checkout/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},7033:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},4470:(e,t,r)=>{Promise.resolve().then(r.bind(r,998)),Promise.resolve().then(r.bind(r,7473)),Promise.resolve().then(r.bind(r,9924))},5150:(e,t,r)=>{Promise.resolve().then(r.bind(r,2403)),Promise.resolve().then(r.bind(r,4133)),Promise.resolve().then(r.bind(r,1416))},7747:(e,t,r)=>{Promise.resolve().then(r.bind(r,5940))},1819:(e,t,r)=>{Promise.resolve().then(r.bind(r,9536))},9536:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(5512),i=r(8009),o=r(1416),n=r(2149),a=r(9334);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,i.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:n,iconNode:a,...l},m)=>(0,i.createElement)("svg",{ref:m,...c,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:d("lucide",o),...l},[...a.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let r=(0,i.forwardRef)(({className:r,...s},o)=>(0,i.createElement)(m,{ref:o,iconNode:t,className:d(`lucide-${l(e)}`,r),...s}));return r.displayName=`${e}`,r},h=u("Bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]),p=u("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),x=u("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),v=u("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),f={bitcoin:{name:"Bitcoin",symbol:"BTC",apiValue:"BTC",icon:()=>(0,s.jsx)(h,{className:"w-6 h-6 text-[#F7931A] transition-transform group-hover:scale-110"})},litecoin:{name:"Litecoin",symbol:"LTC",apiValue:"LTC",icon:()=>(0,s.jsx)("svg",{className:"w-6 h-6 text-[#345D9D] transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 0a12 12 0 1 0 12 12A12 12 0 0 0 12 0zm-.262 3.678h2.584a.343.343 0 0 1 .343.343v12.32l1.706-1.706a.343.343 0 0 1 .484 0l1.815 1.815a.343.343 0 0 1 0 .484l-4.526 4.526a.343.343 0 0 1-.484 0L9.13 16.934a.343.343 0 0 1 0-.484l1.815-1.815a.343.343 0 0 1 .484 0l1.706 1.706V4.021a.343.343 0 0 1-.343-.343H9.177a.343.343 0 0 1-.343-.343V3.678z"})})},solana:{name:"Solana",symbol:"SOL",apiValue:"SOL",icon:()=>(0,s.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#14F195"}),(0,s.jsx)("path",{d:"M7 14.5l10-5M7 9.5l10-5M7 19.5l10-5",stroke:"white",strokeWidth:"2"})]})},dogecoin:{name:"Dogecoin",symbol:"DOGE",apiValue:"DOGE",icon:()=>(0,s.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#C2A633"}),(0,s.jsx)("path",{d:"M8 8h4.5c2.5 0 4.5 2 4.5 4s-2 4-4.5 4H8",stroke:"white",strokeWidth:"2"})]})},tether:{name:"Tether",symbol:"USDT",apiValue:"USDT",icon:()=>(0,s.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#26A17B"}),(0,s.jsx)("path",{d:"M12 5v14M8 8h8",stroke:"white",strokeWidth:"2"})]})}};function b(){let e=(0,a.useRouter)(),{items:t,total:r}=(0,o._)(),[l,d]=(0,i.useState)({email:"",selectedCrypto:""}),[c,m]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null);if(0===t.length)return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Your cart is empty"}),(0,s.jsx)(n.A,{onClick:()=>e.push("/"),children:"Continue Shopping"})]});let b=()=>l.email?l.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?!!l.selectedCrypto||(h({message:"Please select a payment method",field:"crypto"}),!1):(h({message:"Please enter a valid email address",field:"email"}),!1):(h({message:"Email is required",field:"email"}),!1),y=async s=>{if(s.preventDefault(),h(null),b()){m(!0);try{let s;let i=t[0],o=f[l.selectedCrypto];console.log("Payment Request Data:",{email:l.email,selectedCrypto:l.selectedCrypto,cryptoDetails:o,bookId:i.id,format:i.format,amount:r}),console.log("\uD83D\uDE80 ~ handleSubmit ~ book:",i);let n=await fetch("https://infinitedriven.com/api/payment/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email,cryptocurrency:o.apiValue,bookId:i.id,format:i.format,amount:r})}),a=await n.text();console.log("Raw API Response:",a);try{s=JSON.parse(a),console.log("Parsed API Response:",s)}catch(e){throw console.error("JSON Parse Error:",e),Error("Invalid server response")}if(!n.ok||!s.success)throw Error(s.error||"Payment initialization failed");let d=i.title,c=i.format;e.push(`/payments/process?orderId=${s.orderId}&address=${s.paymentAddress}&qrData=${s.qrCodeData}&amount=${s.amount}&currency=${s.currency}&bookTitle=${encodeURIComponent(d)}&format=${c}`)}catch(e){console.error("Payment Error:",e),h({message:e instanceof Error?e.message:"Payment failed. Please try again."})}finally{m(!1)}}};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),u&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-600 rounded-lg",children:u.message}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email for delivery"}),(0,s.jsx)("input",{type:"email",required:!0,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 ${u?.field==="email"?"border-red-500":"border-gray-300"}`,value:l.email,onChange:e=>{d({...l,email:e.target.value}),h(null)},placeholder:"your@email.com",disabled:c})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Payment Method"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(f).map(([e,t])=>{let r=t.icon,i=l.selectedCrypto===e;return(0,s.jsx)("button",{type:"button",onClick:()=>{d({...l,selectedCrypto:e}),h(null)},className:`group p-4 border rounded-lg text-left transition-all duration-200 
                        ${i?"border-blue-500 bg-blue-50 shadow-md transform scale-105":u?.field==="crypto"?"border-red-300":"hover:border-blue-300 hover:bg-blue-50/50 hover:shadow-sm hover:scale-102"}`,disabled:c,children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"transition-transform duration-200",children:(0,s.jsx)(r,{})}),(0,s.jsxs)("div",{className:"transition-transform duration-200",children:[(0,s.jsx)("div",{className:`font-medium ${i?"text-blue-600":""}`,children:t.name}),(0,s.jsx)("div",{className:`text-sm ${i?"text-blue-500":"text-gray-500"}`,children:t.symbol})]})]})},e)})})]}),(0,s.jsx)(n.A,{type:"submit",className:"w-full flex items-center justify-center space-x-2 transition-all duration-200 hover:shadow-lg",disabled:!l.email||!l.selectedCrypto||c,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Processing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Pay ",r.toFixed(2)," USD"]}),(0,s.jsx)(v,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:t.map(e=>(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.format})]}),(0,s.jsxs)("div",{className:"font-medium",children:["$",e.price.toFixed(2)]})]},e.id))}),(0,s.jsx)("div",{className:"border-t pt-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Total:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold",children:["$",r.toFixed(2)]})]})})]}),(0,s.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zm0-9a1 1 0 011 1v3a1 1 0 11-2 0V8a1 1 0 011-1z"})}),"Secure Payment"]}),(0,s.jsx)("p",{children:"Your payment is processed securely using blockchain technology."})]})]})]})]})}},2149:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5512);function i({children:e,className:t="",onClick:r,type:i="button",...o}){return(0,s.jsx)("button",{type:i,className:`bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors ${t}`,onClick:r,...o,children:e})}},4133:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>a});var s=r(5512),i=r(8009),o=r(9334);r(5668),r(2403);let n=(0,i.createContext)(void 0),a=({children:e})=>{let[t,r]=(0,i.useState)(null),[a,l]=(0,i.useState)(!0);(0,o.useRouter)(),(0,i.useEffect)(()=>{l(!1)},[]);let d=async(e,t)=>{};return(0,s.jsx)(n.Provider,{value:{user:t,loading:a,login:d,logout:()=>{}},children:e})},l=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1416:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>n,_:()=>a});var s=r(5512),i=r(8009);let o=(0,i.createContext)(null);function n({children:e}){let[t,r]=(0,i.useState)([]),n=t.reduce((e,t)=>e+t.price*t.quantity,0),a=t.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(o.Provider,{value:{items:t,addItem:e=>{r(t=>t.find(t=>t.id===e.id&&t.format===e.format)?t.map(t=>t.id===e.id&&t.format===e.format?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeItem:e=>{r(t=>t.filter(t=>t.id!==e))},modifyQuantity:(e,t)=>{r(r=>r.map(r=>r.id===e&&r.quantity+t>0?{...r,quantity:r.quantity+t}:r))},clearCart:()=>r([]),total:n,itemCount:a},children:e})}function a(){let e=(0,i.useContext)(o);if(!e)throw Error("useCart must be used within CartProvider");return e}},5940:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/infinite-drive-v2/frontend/src/app/checkout/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/infinite-drive-v2/frontend/src/app/checkout/page.tsx","default")},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var s=r(2740),i=r(7339),o=r.n(i);r(1135);var n=r(7473),a=r(9924),l=r(998);let d={title:"Infinite Drive - Self-Development and Self-Discipline E-books",description:"Premium ebooks with crypto payments"};function c({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:o().className,children:(0,s.jsx)(n.AuthProvider,{children:(0,s.jsxs)(a.CartProvider,{children:[e,(0,s.jsx)(l.Toaster,{})]})})})})}},7473:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i});var s=r(6760);let i=(0,s.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/infinite-drive-v2/frontend/src/context/authContext.tsx","AuthProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/infinite-drive-v2/frontend/src/context/authContext.tsx","useAuth")},9924:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>i});var s=r(6760);let i=(0,s.registerClientReference)(function(){throw Error("Attempted to call CartProvider() from the server but CartProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/infinite-drive-v2/frontend/src/lib/cart/CartContext.tsx","CartProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useCart() from the server but useCart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/infinite-drive-v2/frontend/src/lib/cart/CartContext.tsx","useCart")},440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(8077);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},1135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,408,77],()=>r(5085));module.exports=s})();